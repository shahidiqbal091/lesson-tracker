<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lesson History Tracker</title>
    <style>
        /* Reset and Base Styles */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
        }
        
        h1, h2, h3 {
            color: #2c3e50;
            margin-bottom: 20px;
        }
        
        /* Header Styles */
        header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eee;
        }
        
        /* Form Styles */
        .form-container {
            background-color: #f8f9fa;
            padding: 25px;
            border-radius: 8px;
            margin-bottom: 30px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 16px;
            transition: border 0.3s;
        }
        
        input:focus, select:focus, textarea:focus {
            border-color: #3498db;
            outline: none;
        }
        
        textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        button {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: background-color 0.3s;
        }
        
        button:hover {
            background-color: #2980b9;
        }
        
        /* History Table Styles */
        .history-container {
            overflow-x: auto;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        
        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        th {
            background-color: #3498db;
            color: white;
            font-weight: 600;
        }
        
        tr:nth-child(even) {
            background-color: #f8f9fa;
        }
        
        tr:hover {
            background-color: #f1f1f1;
        }
        
        .action-btns {
            display: flex;
            gap: 10px;
        }
        
        .edit-btn {
            background-color: #f39c12;
        }
        
        .delete-btn {
            background-color: #e74c3c;
        }
        
        /* Filter Controls */
        .filter-controls {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .filter-group {
            flex: 1;
            min-width: 200px;
        }
        
        /* Stats Section */
        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            text-align: center;
        }
        
        .stat-value {
            font-size: 36px;
            font-weight: 700;
            color: #3498db;
            margin: 10px 0;
        }
        
        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .form-container {
                padding: 15px;
            }
            
            th, td {
                padding: 10px 5px;
                font-size: 14px;
            }
            
            .action-btns {
                flex-direction: column;
                gap: 5px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Lesson History Tracker</h1>
            <p>Record and manage your teaching history</p>
        </header>
        
        <div class="form-container">
            <h2>Add New Lesson</h2>
            <form id="lessonForm">
                <div class="form-group">
                    <label for="lessonDate">Date</label>
                    <input type="date" id="lessonDate" required>
                </div>
                
                <div class="form-group">
                    <label for="studentName">Student Name</label>
                    <input type="text" id="studentName" placeholder="Enter student name" required>
                </div>
                
                <div class="form-group">
                    <label for="subject">Subject</label>
                    <select id="subject" required>
                        <option value="">Select subject</option>
                        <option value="Math">Math</option>
                        <option value="English">English</option>
                        <option value="Science">Science</option>
                        <option value="History">History</option>
                        <option value="Art">Art</option>
                        <option value="Music">Music</option>
                        <option value="Other">Other</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="duration">Duration (minutes)</label>
                    <input type="number" id="duration" placeholder="Enter lesson duration" min="1" required>
                </div>
                
                <div class="form-group">
                    <label for="topic">Topic Covered</label>
                    <input type="text" id="topic" placeholder="Enter lesson topic" required>
                </div>
                
                <div class="form-group">
                    <label for="notes">Notes</label>
                    <textarea id="notes" placeholder="Add any additional notes"></textarea>
                </div>
                
                <button type="submit">Save Lesson</button>
            </form>
        </div>
        
        <div class="stats-container">
            <div class="stat-card">
                <h3>Total Lessons</h3>
                <div class="stat-value" id="totalLessons">0</div>
                <p>All recorded lessons</p>
            </div>
            
            <div class="stat-card">
                <h3>Total Hours</h3>
                <div class="stat-value" id="totalHours">0</div>
                <p>Combined teaching time</p>
            </div>
            
            <div class="stat-card">
                <h3>Top Student</h3>
                <div class="stat-value" id="topStudent">-</div>
                <p>Most frequent student</p>
            </div>
            
            <div class="stat-card">
                <h3>Top Subject</h3>
                <div class="stat-value" id="topSubject">-</div>
                <p>Most taught subject</p>
            </div>
        </div>
        
        <div class="filter-controls">
            <div class="filter-group">
                <label for="filterStudent">Filter by Student</label>
                <select id="filterStudent">
                    <option value="">All Students</option>
                </select>
            </div>
            
            <div class="filter-group">
                <label for="filterSubject">Filter by Subject</label>
                <select id="filterSubject">
                    <option value="">All Subjects</option>
                    <option value="Math">Math</option>
                    <option value="English">English</option>
                    <option value="Science">Science</option>
                    <option value="History">History</option>
                    <option value="Art">Art</option>
                    <option value="Music">Music</option>
                    <option value="Other">Other</option>
                </select>
            </div>
            
            <div class="filter-group">
                <label for="filterDateFrom">From Date</label>
                <input type="date" id="filterDateFrom">
            </div>
            
            <div class="filter-group">
                <label for="filterDateTo">To Date</label>
                <input type="date" id="filterDateTo">
            </div>
        </div>
        
        <div class="history-container">
            <h2>Lesson History</h2>
            <table id="lessonTable">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>Student</th>
                        <th>Subject</th>
                        <th>Duration</th>
                        <th>Topic</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="lessonTableBody">
                    <!-- Lessons will be added here dynamically -->
                </tbody>
            </table>
        </div>
    </div>

    <script>
        // Lesson data array
        let lessons = JSON.parse(localStorage.getItem('lessons')) || [];
        let editIndex = -1; // Track which lesson is being edited
        
        // DOM elements
        const lessonForm = document.getElementById('lessonForm');
        const lessonTableBody = document.getElementById('lessonTableBody');
        const filterStudent = document.getElementById('filterStudent');
        const filterSubject = document.getElementById('filterSubject');
        const filterDateFrom = document.getElementById('filterDateFrom');
        const filterDateTo = document.getElementById('filterDateTo');
        
        // Stats elements
        const totalLessonsEl = document.getElementById('totalLessons');
        const totalHoursEl = document.getElementById('totalHours');
        const topStudentEl = document.getElementById('topStudent');
        const topSubjectEl = document.getElementById('topSubject');
        
        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            // Load lessons from localStorage
            loadLessons();
            
            // Update stats
            updateStats();
            
            // Set today's date as default
            document.getElementById('lessonDate').valueAsDate = new Date();
            
            // Form submission
            lessonForm.addEventListener('submit', function(e) {
                e.preventDefault();
                saveLesson();
            });
            
            // Filter event listeners
            filterStudent.addEventListener('change', filterLessons);
            filterSubject.addEventListener('change', filterLessons);
            filterDateFrom.addEventListener('change', filterLessons);
            filterDateTo.addEventListener('change', filterLessons);
        });
        
        // Save or update lesson
        function saveLesson() {
            const lesson = {
                date: document.getElementById('lessonDate').value,
                studentName: document.getElementById('studentName').value.trim(),
                subject: document.getElementById('subject').value,
                duration: parseInt(document.getElementById('duration').value),
                topic: document.getElementById('topic').value.trim(),
                notes: document.getElementById('notes').value.trim()
            };
            
            if (editIndex === -1) {
                // Add new lesson
                lessons.push(lesson);
            } else {
                // Update existing lesson
                lessons[editIndex] = lesson;
                editIndex = -1;
                lessonForm.querySelector('button').textContent = 'Save Lesson';
            }
            
            // Save to localStorage
            localStorage.setItem('lessons', JSON.stringify(lessons));
            
            // Reset form
            lessonForm.reset();
            document.getElementById('lessonDate').valueAsDate = new Date();
            
            // Refresh UI
            loadLessons();
            updateStats();
            updateStudentFilter();
        }
        
        // Load lessons into the table
        function loadLessons() {
            // Clear table
            lessonTableBody.innerHTML = '';
            
            // Populate student filter
            updateStudentFilter();
            
            if (lessons.length === 0) {
                const row = document.createElement('tr');
                row.innerHTML = '<td colspan="6" style="text-align: center;">No lessons recorded yet</td>';
                lessonTableBody.appendChild(row);
                return;
            }
            
            // Sort by date (newest first)
            const sortedLessons = [...lessons].sort((a, b) => new Date(b.date) - new Date(a.date));
            
            // Add each lesson to the table
            sortedLessons.forEach((lesson, index) => {
                const row = document.createElement('tr');
                
                // Format date
                const date = new Date(lesson.date);
                const formattedDate = date.toLocaleDateString('en-US', {
                    year: 'numeric',
                    month: 'short',
                    day: 'numeric'
                });
                
                row.innerHTML = `
                    <td>${formattedDate}</td>
                    <td>${lesson.studentName}</td>
                    <td>${lesson.subject}</td>
                    <td>${lesson.duration} min</td>
                    <td>${lesson.topic}</td>
                    <td class="action-btns">
                        <button class="edit-btn" onclick="editLesson(${index})">Edit</button>
                        <button class="delete-btn" onclick="deleteLesson(${index})">Delete</button>
                    </td>
                `;
                
                lessonTableBody.appendChild(row);
            });
        }
        
        // Edit a lesson
        function editLesson(index) {
            const lesson = lessons[index];
            editIndex = index;
            
            // Fill the form with lesson data
            document.getElementById('lessonDate').value = lesson.date;
            document.getElementById('studentName').value = lesson.studentName;
            document.getElementById('subject').value = lesson.subject;
            document.getElementById('duration').value = lesson.duration;
            document.getElementById('topic').value = lesson.topic;
            document.getElementById('notes').value = lesson.notes;
            
            // Change button text
            lessonForm.querySelector('button').textContent = 'Update Lesson';
            
            // Scroll to form
            document.querySelector('.form-container').scrollIntoView({
                behavior: 'smooth'
            });
        }
        
        // Delete a lesson
        function deleteLesson(index) {
            if (confirm('Are you sure you want to delete this lesson?')) {
                lessons.splice(index, 1);
                localStorage.setItem('lessons', JSON.stringify(lessons));
                loadLessons();
                updateStats();
                updateStudentFilter();
            }
        }
        
        // Filter lessons based on selected criteria
        function filterLessons() {
            const studentFilter = filterStudent.value;
            const subjectFilter = filterSubject.value;
            const dateFrom = filterDateFrom.value;
            const dateTo = filterDateTo.value;
            
            const filteredLessons = lessons.filter(lesson => {
                // Student filter
                if (studentFilter && lesson.studentName !== studentFilter) {
                    return false;
                }
                
                // Subject filter
                if (subjectFilter && lesson.subject !== subjectFilter) {
                    return false;
                }
                
                // Date range filter
                if (dateFrom && lesson.date < dateFrom) {
                    return false;
                }
                
                if (dateTo && lesson.date > dateTo) {
                    return false;
                }
                
                return true;
            });
            
            // Display filtered lessons
            displayFilteredLessons(filteredLessons);
        }
        
        // Display filtered lessons
        function displayFilteredLessons(filteredLessons) {
            lessonTableBody.innerHTML = '';
            
            if (filteredLessons.length === 0) {
                const row = document.createElement('tr');
                row.innerHTML = '<td colspan="6" style="text-align: center;">No lessons match your filters</td>';
                lessonTableBody.appendChild(row);
                return;
            }
            
            // Sort by date (newest first)
            const sortedLessons = [...filteredLessons].sort((a, b) => new Date(b.date) - new Date(a.date));
            
            sortedLessons.forEach((lesson, index) => {
                const originalIndex = lessons.findIndex(
                    l => l.date === lesson.date && 
                    l.studentName === lesson.studentName && 
                    l.subject === lesson.subject
                );
                
                const row = document.createElement('tr');
                
                // Format date
                const date = new Date(lesson.date);
                const formattedDate = date.toLocaleDateString('en-US', {
                    year: 'numeric',
                    month: 'short',
                    day: 'numeric'
                });
                
                row.innerHTML = `
                    <td>${formattedDate}</td>
                    <td>${lesson.studentName}</td>
                    <td>${lesson.subject}</td>
                    <td>${lesson.duration} min</td>
                    <td>${lesson.topic}</td>
                    <td class="action-btns">
                        <button class="edit-btn" onclick="editLesson(${originalIndex})">Edit</button>
                        <button class="delete-btn" onclick="deleteLesson(${originalIndex})">Delete</button>
                    </td>
                `;
                
                lessonTableBody.appendChild(row);
            });
        }
        
        // Update student filter dropdown
        function updateStudentFilter() {
            // Get unique student names
            const studentNames = [...new Set(lessons.map(lesson => lesson.studentName))];
            
            // Clear and repopulate dropdown
            filterStudent.innerHTML = '<option value="">All Students</option>';
            
            studentNames.forEach(name => {
                const option = document.createElement('option');
                option.value = name;
                option.textContent = name;
                filterStudent.appendChild(option);
            });
        }
        
        // Update statistics
        function updateStats() {
            // Total lessons
            totalLessonsEl.textContent = lessons.length;
            
            // Total hours (convert minutes to hours)
            const totalMinutes = lessons.reduce((sum, lesson) => sum + lesson.duration, 0);
            const totalHours = (totalMinutes / 60).toFixed(1);
            totalHoursEl.textContent = totalHours;
            
            // Top student
            if (lessons.length > 0) {
                const studentCounts = {};
                lessons.forEach(lesson => {
                    studentCounts[lesson.studentName] = (studentCounts[lesson.studentName] || 0) + 1;
                });
                
                const topStudent = Object.entries(studentCounts).reduce((a, b) => 
                    a[1] > b[1] ? a : b
                )[0];
                topStudentEl.textContent = topStudent;
            } else {
                topStudentEl.textContent = '-';
            }
            
            // Top subject
            if (lessons.length > 0) {
                const subjectCounts = {};
                lessons.forEach(lesson => {
                    subjectCounts[lesson.subject] = (subjectCounts[lesson.subject] || 0) + 1;
                });
                
                const topSubject = Object.entries(subjectCounts).reduce((a, b) => 
                    a[1] > b[1] ? a : b
                )[0];
                topSubjectEl.textContent = topSubject;
            } else {
                topSubjectEl.textContent = '-';
            }
        }
    </script>
</body>
</html>
